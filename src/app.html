<!DOCTYPE html>
<html lang="ja" class="">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ひんやりさがし</title>
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- DNS prefetch for external services (only loaded when needed) -->
    <link rel="dns-prefetch" href="https://www.google.com">
    <link rel="dns-prefetch" href="https://maps.googleapis.com">
    <link rel="dns-prefetch" href="https://api.openweathermap.org">
    <link rel="dns-prefetch" href="https://generativelanguage.googleapis.com">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&text=close,light_mode,dark_mode,menu,mode_cool,thermostat,location_on,humidity_low,search,content_copy,database&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&text=close,light_mode,dark_mode,menu,mode_cool,thermostat,location_on,humidity_low,search,content_copy,database&display=swap"></noscript>
    
    <!-- Material Symbols フォント読み込み監視スクリプト（レイアウトシフト防止） -->
    <script>
      (async () => {
        try {
          // タイムアウト設定（3秒でフォールバック）
          const fontLoadTimeout = new Promise((_, reject) => 
            setTimeout(() => reject(new Error('Font load timeout')), 3000)
          );
          
          // Material Symbolsフォントの読み込み完了を待機
          await Promise.race([
            document.fonts.load('1em "Material Symbols Outlined"'),
            fontLoadTimeout
          ]);
          
          // フォント読み込み完了時にクラスを追加してアイコンを表示
          document.documentElement.classList.add('fonts-loaded');
        } catch (error) {
          // フォント読み込みが失敗またはタイムアウトした場合もアイコンを表示
          console.warn('Material Symbols font could not be loaded in time, showing fallback.', error);
          document.documentElement.classList.add('fonts-loaded');
        }
        
        // フォント読み込み状況をログに記録（デバッグ用）
        if (document.fonts) {
          document.fonts.ready.then(() => {
            const materialSymbolsFont = [...document.fonts].find(font => 
              font.family.includes('Material Symbols')
            );
            if (materialSymbolsFont) {
              console.log('Material Symbols font status:', materialSymbolsFont.status);
            }
          });
        }
      })();
    </script>
    
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover" class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-200">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
